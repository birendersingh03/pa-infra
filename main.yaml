---
  AWSTemplateFormatVersion: '2010-09-09'
  Description: "PA VPC master stack"
  Metadata: {}

  Mappings: {}

  Conditions: {}

  Resources: 
      stackVPC:
        Type: AWS::CloudFormation::Stack
        Properties:
          TemplateURL: https://birender-pa-bucket-test.s3.ap-south-1.amazonaws.com/vpc.yaml
               

      stackEIP:
        Type: AWS::CloudFormation::Stack
        DependsOn: 
        - stackVPC
        Properties:
          TemplateURL: https://birender-pa-bucket-test.s3.ap-south-1.amazonaws.com/eip.yaml

      stackSUBNET:
        Type: AWS::CloudFormation::Stack
        DependsOn: 
        - stackVPC
        Properties:
          TemplateURL: https://birender-pa-bucket-test.s3.ap-south-1.amazonaws.com/subnet.yaml

      stackIGW:
        Type: AWS::CloudFormation::Stack
        DependsOn: 
        - stackVPC
        Properties:
          TemplateURL: https://birender-pa-bucket-test.s3.ap-south-1.amazonaws.com/igw.yaml

      stackNATGW:
        Type: AWS::CloudFormation::Stack
        DependsOn: 
        - stackIGW
        - stackEIP
        - stackSUBNET
        Properties:
          TemplateURL: https://birender-pa-bucket-test.s3.ap-south-1.amazonaws.com/ngw.yaml

      stackROUTES:
        Type: AWS::CloudFormation::Stack
        DependsOn: 
        - stackIGW
        - stackNATGW
        - stackSUBNET
        - stackVPC
        Properties:
          TemplateURL: https://birender-pa-bucket-test.s3.ap-south-1.amazonaws.com/route.yaml

      stackSECURITYGROUP:
        Type: AWS::CloudFormation::Stack
        DependsOn: 
        - stackVPC
        Properties:
          TemplateURL: https://birender-pa-bucket-test.s3.ap-south-1.amazonaws.com/sg.yaml
        
      stackEC2:
        Type: AWS::CloudFormation::Stack
        DependsOn: 
        - stackROUTES
        Properties:
          TemplateURL: https://birender-pa-bucket-test.s3.ap-south-1.amazonaws.com/ec2.yaml       
              
      stackEKS:
        Type: AWS::CloudFormation::Stack
        DependsOn: 
        - stackROUTES
        Properties:
          TemplateURL: https://birender-pa-bucket-test.s3.ap-south-1.amazonaws.com/eks.yaml
            
               
